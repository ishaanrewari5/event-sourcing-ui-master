<!DOCTYPE html>
<html>
<head>
    <title>Mormon Project</title>
    <link href="https://fonts.googleapis.com/css?family=Muli" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="icon" href="logo.jpeg" type="image/x-icon">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.min.js"></script>
	

    <style type="">
		header {
			  background-color: #34262B;
			  background: url(https://picjumbo.imgix.net/HNCK7769.jpg?q=40&w=1650&sharp=30) no-repeat center center fixed;
			  background-size: cover;
			}
		    .more-space {
			  margin-bottom: 20%;
			}
			/*li{
				font-weight: bold;
				color: #00d2ff;
			}*/
			header h1 {
			  color: #34262B;
			  font-size: 150px;
			}

			h1 {
			  font-family: "Amatic SC", sans-serif;
			}

			.break1, .break2, .contact h2, .contact h3, p, header h4 {
			  font-family: "Coming Soon", sans-serif;
			}

			.social-media {
			  margin-top: 7%;
			}

			.intro {
			  margin-top: 12%;
			}

			header h4 {
			  color: #fff;
			  font-size: 28px;
			  font-weight: bold;
			}

			.red {
			  color: #c1292e;
			  font-weight: bold;
			}
			/**Navbar customs**/

			nav ul li {
			  font-size: 17px;
			  font-family: "News Cycle";
			}

			.about-us a {
			  font-family: "News Cycle", serif;
			}

			.navbar-brand {
			  font-size: 25px;
			  font-family: "News Cycle";
			}

			.navbar-default {
			  background-color: #FDFFFC;
			  border: 0;
			}

			.navbar-default .navbar-brand {
			  margin-left: 5%;
			  color: #34262B;
			}

			.navbar-default .navbar-brand:hover,
			.navbar-default .navbar-brand:focus {
			  color: #FDFFFC;
			  background-color: transparent;
			}

			.navbar-default .navbar-text {
			  color: #210A2A;
			}

			.navbar-default .navbar-nav > li > a {
			  color: #210A2A;
			}

			.navbar-default .navbar-nav > li > a:hover,
			.navbar-default .navbar-nav > li > a:focus {
			  color: #F9F2F6;
			  background-color: transparent;
			  border-bottom: 1px solid #F9F2F6;
			}

			.navbar-default .navbar-nav > .active > a,
			.navbar-default .navbar-nav > .active > a:hover,
			.navbar-default .navbar-nav > .active > a:focus {
			  color: #F9F2F6;
			  background-color: #e7e7e7;
			}

			.navbar-default .navbar-nav > .disabled > a,
			.navbar-default .navbar-nav > .disabled > a:hover,
			.navbar-default .navbar-nav > .disabled > a:focus {
			  color: #F9F2F6;
			  background-color: transparent;
			}

			.navbar-default .navbar-toggle {
			  border-color: #ddd;
			}

			.navbar-default .navbar-toggle:hover,
			.navbar-default .navbar-toggle:focus {
			  background-color: #ddd;
			}

			.navbar-default .navbar-toggle .icon-bar {
			  background-color: #888;
			}

			.navbar-default .navbar-collapse,
			.navbar-default .navbar-form {
			  border-color: #e7e7e7;
			}

			.navbar-default .navbar-nav > .open > a,
			.navbar-default .navbar-nav > .open > a:hover,
			.navbar-default .navbar-nav > .open > a:focus {
			  color: #555;
			  background-color: #e7e7e7;
			}

			.navbar-inner {
			  background: rgba(0, 0, 0, 0);
			}

			.works {
			}

			.tabs {
			  background-color: #F26430;
			  border: 1px solid #210A20;
			}

			.works p {
			  margin-top: 10%;
			}

			.works h1 {
			  font-size: 100px;
			  margin-top: 7%;
			  margin-bottom: 5%;
			}

			.thumbnail {
			  margin-bottom: 12%
			}

			.thumbnail:hover {
			  -webkit-box-shadow: 2px 2px 2px 1px #ccc;  /* Safari 3-4, iOS 4.0.2 - 4.2, Android 2.3+ */
			  -moz-box-shadow:    2px 2px 2px 1px #ccc;  /* Firefox 3.5 - 3.6 */
			  box-shadow:         2px 2px 2px 1px #ccc;  /* Opera 10.5, IE 9, Firefox 4+, Chrome 6+, iOS 5 */
			}

			.space {
			  margin-bottom: 10%;
			}


			.break1 {
			  /*background: url("devops.jpeg") center center fixed;*/
			  background-image: linear-gradient(rgba(0,0,0,0.7),rgba(0,0,0,0.9)),url("devops.jpeg");
			  background-size: cover;
			}

			.break2 {
			  background: url(https://unsplash.imgix.net/photo-1430760814266-9c81759e5e55?fit=crop&fm=jpg&h=750&q=75&w=1050) center center fixed;
			  -webkit-background-size: cover;
			  -moz-background-size: cover;
			  -o-background-size: cover;
			  background-size: cover;
			}

			.break2 h3 {
			  color: #fff;
			  font-size: 70px;
			  margin-top: 15%;
			  margin-bottom: 15%;
			}

			.break1 h3 {
			  color: #fff;
			  font-size: 70px;
			  margin-top: 15%;
			  margin-bottom: 15%;
			}

			.about-us {
			  background-color: #34262B;
			}

			.about-us h1 {
			  color: #C1292E;
			  font-size: 100px;
			  margin-top: 7%;
			}

			.about-us-p {
			  font-size: 20px;
			  color: #FDFFFC;
			  margin-left: 12%;
			  margin-right: 12%;
			  margin-top: 7%;
			  margin-bottom: 10%;
			}

			.descript {
			  margin-bottom: 15%;
			}

			.team {
			  margin-top: 25%;
			  border: 1px solid #FDFFFC;
			  padding: 20px 50px 20px 50px;
			  text-decoration: none;
			  color: #F9F2F6;
			}

			.team:hover {
			  text-decoration: none;
			  background: rgba(193, 41, 46, 0.4);
			  color: #F9F2F6;
			}
			/* Contact */

			.contact {
			  background-color: #c1292e;
			}

			.contact h1 {
			  font-size: 100px;
			  margin-top: 7%;
			}

			.social-media-row-1 {
			  margin-top: 10%;
			}

			.contact i {
			  font-size: 1000%;
			  padding: 20% 0% 20% 0%;
			}

			.contact .icon {
			  border: 1px solid black;
			}

			.icon a {
			  color: #fff;
			}

			.icon:hover {
			  background-color: rgba(0, 0, 0, 0.5);
			}

			/* Footer */

			footer {
			  background-color: #34292b;
			}

			.go-up-icon i {
			  color: white;
			  font-size: 400%;
			  margin-top: 15%;
			  border: 1px solid white;
			  padding: 2% 4% 3% 4%;
			  border-radius: 10%;
			}

			.go-up-icon i:hover {
			  background-color: rgba(100, 100, 100, 0.3);
			}

			footer p {
			  color: white;
			  padding-top: 37%;
			}

			@media screen and (max-width: 500px) {
			  header h1, .about-us h1, .works h1, .contact h1 {
			    font-size: 50px;
			    margin-bottom: 15%;
			  }
			    
			  header h4 {
			    font-size: 20px;
			    margin-bottom: 15%;
			  }
			  
			  .about-us-p {
			    font-size: 14px;
			  }
			  
			  .contact i {
			    font-size: 500%;
			  }
			  
			  .intro {
			  margin-top: 50%;
			  }
			}
			.top1,.top2{
				background: #373B44;
				background: linear-gradient(to right,  #373B44, #4286f4);
				/*width: 100vw;*/

			}

			@media (min-width: 800px){
				.logo{
					margin-left: -15px;
				}
				.x1{
					padding-left: -15px;
				}
				.lesspad{
					/*margin-left: -150px;*/
				}
			}
			html{
				scroll-behavior: smooth;
			}
			body{
				/*padding: 0;*/
			}
			.foot {
			    width:100%;
			    text-align: center;
			    background: linear-gradient(rgba(198, 201, 222, 0.5),rgba(198, 201, 222, 0.7));
			    margin: 0vw;
			    padding-bottom: 8vh;
			    padding-top: 8vh;
			}
			.row {
			    width: 70vw;
			    margin-left: 15vw;
			}

			.fader{
			    height: 100vh;
			    width: 100vw;
			    position: fixed;
			    top: 0px;
			    left: 0px;
			    background: #e5e5d8;
			    opacity: 0.9;
			    z-index: 99998;
			    display: none;
			}

			.modal-box{
			    height: 90vh;
			    /*width: 80vw;*/
			    background: #ffffff;
			    /*color: rgb(81, 213, 191);*/
			    border-radius: 10px;
			    position: fixed;
			    top:50%;
			    left: 50%;
			    transform: translate(-50%,-50%);
			    z-index: 99999;
			    overflow: scroll;
			    display: none;
			}

			.modal-top-bar{
			    height: 60px;
			    width: 100%;
			    border-radius:10px;
			    padding-left: 20px;
			    padding-top: 20px;
			}

			#back{
			    height: 40px;
			}

			.terms{
			    display: none;
			    width: 100%;
			    height: auto;
			}


			#abouter{
			    width: 100%;
			    padding-top: 20px;
			    padding-left: 20px;
			    padding-right: 20px;
			}

			#abouter b{
			    font-size: 1.2em;
			}

			#abouter i{
			    font-size: 1em;
			}

			#abouter div{
			    padding-bottom: 30px;

			}

			.button {
			  display: inline-block;
			  border-radius: 4px;
			  background-color: #f4511e;
			  border: none;
			  color: #FFFFFF;
			  text-align: center;
			  font-size: 28px;
			  padding: 20px;
			  width: 200px;
			  transition: all 0.5s;
			  cursor: pointer;
			  margin: 5px;
			}

			.button span {
			  cursor: pointer;
			  display: inline-block;
			  position: relative;
			  transition: 0.5s;
			}

			.button span:after {
			  content: '\00bb';
			  position: absolute;
			  opacity: 0;
			  top: 0;
			  right: -20px;
			  transition: 0.5s;
			}

			.button:hover span {
			  padding-right: 25px;
			}

			.button:hover span:after {
			  opacity: 1;
			  right: 0;
			}
			* {
				font-style: sans-serif, Lato;
			}
			
	</style>
</head>


<body style="font-family: 'Muli', sans-serif;">

<div class="fader"></div>

<div class="modal-box">

    <div class="modal-top-bar">

        <a> <img id="back" src="previous.svg"></a>

    </div>

    <div class="faq">
        <div id="abouter">
			<div class="container-fluid">
				<div class="row">
				<form action="http://localhost:3000/api/v1/publish" method="POST" name="publishData" id="publishData">
						<label for="userid" class="w3-text-blue"><b>User_id</b></label><br>
					    <input class="w3-input w3-border" type="text" placeholder="Enter id" name="id" id="pb_id" required>
					    <br>
					    <label class="w3-text-blue" for="log"><b>Enter Log</b></label><br>
					    <input class="w3-input w3-border" id="pb_log" type="string" placeholder="Enter Log" name="log" required>
					    <br>
					    <label class="w3-text-blue" for="host"><b>Enter Host</b></label><br>
					    <input class="w3-input w3-border" id="pb_host" type="string" placeholder="Enter Host" name="host" required><br>
					    <hr>
					    <button type="submit" class="publishbtn button" id="pb" onclick="sendPublishData" style="vertical-align:middle"><span>Publish</span></button>
				</form>
				</div>
			</div>
        </div>
    </div>

</div>


  <header>
    <nav class="navbar navbar-default navbar-fixed-top navsbar-inner">
      <div class="container-fluid" style="width: 101.5%">
        <div class="navbar-header top1" style="background: #373B44;background: linear-gradient(to right,  #373B44, #4286f4);">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="logo" href="#"><img style="height: 10vh;width: 70px;" src="logo.jpeg"></a>
        </div>
        <div class="collapse navbar-collapse top2" id="bs-example-navbar-collapse-1">
          <ul class="nav navbar-nav navbar-right x1">
            <li class="lesspad"><a href="#home">Mormon</a></li>
            <li class="lesspad"><a href="#about">About the project</a></li>
            <li class="lesspad"><a href="#about">Know more</a></li>
            <li class="lesspad" style="padding-left: -20px"><a id="pubBtn" href="#">Publish Data &nbsp;&nbsp;</a></li>
          </ul>


        </div>
        <!-- /.navbar-collapse -->
      </div>
      <!-- /.container-fluid -->
    </nav>
    <a name="home"></a>
    <div class="container-fluid">
      <div class="more-space row">
        <div class="col-md-12">
          <div class="text-center intro">
            <br><br><br>	
            <h1 class="animated bounceIn" style="margin-top: 30px">Hello there,</h1>
            <h4 class="red" style="color: #000046">A high availability log sourcing tool for modern DevOps.</h4>
          </div>
        </div>
      </div>
    </div>
    </div>
  </header>

  <!----ABOUT US---->

  <div class="about-us" id="startchange">
    <a name="about"></a>
    <div class="container-fluid">
      <div class="row text-center">
        <div class="descript col-xs-12 col-sm-12 col-md-12">
          <!-- <h2 class="red">ABOUT THE PROJECT</h2> --><br><br>
          <p class="about-us-p">We aim to solve the problem faced in handling and aggregating the logs manually, this can be used by others which will help in saving a considerable amount of time. We also aim to come up with the solution to the clogging problems faced due to the low bandwidth and high amount of requests .
We try to provide a seamless integration across different codebases. We have also developed Self container library. We will try to lower the bottlenecking.
</p>
          <a href="#" class="team">KNOW MORE</a>
        </div>
      </div>
    </div>
  </div>

  <div class="break2 container-fluid text-center">
    <h3 style="color: black">We develop the things!</h3>
  </div>

  <!----SERVICES---->
  <div class="works">
    <a name="works"></a>
    <div class="container-fluid">

      <div class="row" style="margin-top: -100px">
        <div class="text-center col-xs-12 col-sm-12 col-md-12">
          <!-- <h3 class="red" style="font-size: 4em;font-weight: 600">Our implementation</h3> -->
        </div>
      </div>

	<hr style="width: 80%;text-align: center;height: 5px;">

	<div class="row">
		<div class="col-lg-12 col-sm-12">
		<script src="https://gist.github.com/angadsharma1016/86f952540a5ccba1a9e41bdfd6b71292.js"></script>
		</div>
	</div>
    </div>
  </div>


<br><br><br><br>
<h1 style="margin-left: 10%;font-weight: 600;font-size: 30px">Graphs</h1>



<div>
		<div style="width: 80%;margin-left: 10%">
			<div id="chartContainer" style="height: 300px; width: 100%;"></div><br><br>
			<!-- <div id="chartContainer2" style="height: 300px; width: 100%;"></div> -->
			<canvas id="myChart"></canvas><br><br>
			<script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
		</div>

		<div style="width: 80%;margin-left: 10%">
			<div id="chartContainer1" style="height: 300px; width: 100%;"></div><br><br>
			<script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
		</div>
</div>
<!--   <div class="break1 container-fluid text-center">
    <h3>Github Repo!</h3>
  </div>
 -->


 <br><br><br><br>
  <div class="contact text-center" style="background: #8e9eab;background: linear-gradient(to right, #eef2f3, #8e9eab);">
    <a name="contact"></a>
    <div class="container-fluid">

      <div class="row" style="color: ">
        <div class="col-xs-12 col-sm-12 col-md-12 text-center">
          <h1>CONTACT</h3>
        </div>
      </div>
      
      <div class="row">
      
        <div class="col-xs-12 col-sm-12 col-md-12">
          <h2>Connect with us at: </h2>
          <p>..@gmail.com</p>
          <br/>
          <br/>
          <h3>Or, you could get in touch with us on social media</h3>
        </div>
        
      </div>
     
      
      <div class="row" style="">
      	<div class="col-lg-3 col-sm-3 col-md-3"></div>
        <div class="col-xs-6 col-sm-6 col-md-6">
          <a href="#"><i class="fa fa-github"></i></a>
        </div>
        
      </div>
      
      
      
    </div>
    
  </div>

<footer>

  <div class="container-fluid">
      <section class="foot">
      		<h2>Code With &#10084; by</h2>
            <div class="row"> 

                &copy; Angad Sharma, Purushottam Sharma, Dhruv Mittal, Debajit Datta 2019, Code2Create
            </div>
        </section
  </div>

</footer>


<script type="text/javascript">
	$(document).ready(function() {
  var scroll_start = 0;
  var startchange = $('#startchange');
  var offset = startchange.offset();
  if (startchange.length) {
    $(document).scroll(function() {
      scroll_start = $(this).scrollTop();
      if (scroll_start > offset.top) {
        $(".navbar-default").css('background-color', '#c1292e');
      } else {
        $('.navbar-default').css('background-color', 'transparent');
      }
    });
  }
});


$('#pb').on("click", function(e){
	e.preventDefault()
    var obj = {
    	id : $("#pb_id").val(),
    	host : $("#pb_host").val(),
    	log : $("#pb_log").val()
    }
    console.log(obj)
    $.ajax({
        type: 'POST',
        url: 'http://localhost:3000/api/v1/publish',
        //dataType: 'json',
        data: JSON.stringify(obj),
        //headers: [{content-Type : 'application/json'}],
        success: function(data) {
            alert(data)
        }
    });
})


    $(document).ready(function(){
        $('#back').click(function(){
            $('.fader').fadeOut(400);
            $('.modal-box').fadeOut(400);
            $('.PublishData').fadeOut(400);
        });
        $('#pubBtn').click(function(){
            $('.fader').fadeIn(400);
            $('.modal-box').fadeIn(400);
            $('.publishData').fadeIn(400);
        });


    })


</script>


<script>
window.onload = function () {
var dps = []; // dataPoints
var chart = new CanvasJS.Chart("chartContainer", {
	title :{
		text: "Number of Logs V/s Time"
	},
	axisY: {
		includeZero: false
	},      
	data: [{
		type: "line",
		dataPoints: dps
	}]
});
var xVal = 0;
var yVal = 100; 
var updateInterval = 1000;
var dataLength = 20; 
var pie = 0;
			lb = []
var updateChart = function (count) {
$.ajax({
	type:"GET",
	url: "http://localhost:3000/api/v1/read"
}).done(function(res){
	res = JSON.parse(res);
	count = count || 1;
	// console./log(res)
	for (var j = 0; j < count; j++) {
		yVal = res.length;
		dps.push({
			x: xVal,
			y: yVal
		});
		xVal++;
		if(pie%5==0)
		{
			pie=0;
			dt = {}
			dp = []
			for(i=0;i<res.length;i++)
			{
				dt[res[i].host] = 0;
			}
			for(i=0;i<res.length;i++)
			{
				dt[res[i].host] += 1;
			}
			index = 0
			for(key in dt){
				dp[index++] = dt[key]
			}
			index = 0
			for(key in dt){
				lb[index++] = key;
			}
			console.log(lb)
	// 	var chart2 = new CanvasJS.Chart("chartContainer2", {
	// 		animationEnabled: true,
	// 		title: {
	// 			text: "Logs of Each Host"
	// 		},
	// 		data: [{
	// 			type: "pie",
	// 			startAngle: 240,
	// 			yValueFormatString: "##0.00\"%\"",
	// 			indexLabel: "{label} {y}",
	// 			dataPoints: dp			}]
	// 	});
	// 	chart2.render();
	var ctx = document.getElementById('myChart').getContext('2d');
	var myDoughnutChart = new Chart(ctx, {
    type: 'doughnut',
    data:  {
    	        labels: lb,
    datasets: [{
    	backgroundColor : ['rgba(255, 99, 132, 0.8)',
                'rgba(54, 162, 235, 0.95)',
                'rgba(255, 206, 86, 0.95)',
                'rgba(75, 192, 192, 0.95)',
                'rgba(153, 102, 255, 0.95)',
                'rgba(255, 159, 64, 0.95)'],
    	data:dp}],
	label : 'piechart'
    },
    options: {color: [
    'red',    // color for data at index 0
    'blue',   // color for data at index 1
    'green',  // color for data at index 2
    'black',
    'yellow',
    'orange',
    'pink',
    'violet' 
]}
});
}     pie+=1
	}
	//
	//
})
	if (dps.length > dataLength) {
		dps.shift();
	}
	chart.render();
};
updateChart(dataLength);
setInterval(function(){updateChart()}, updateInterval);
    graph1 = []
    graph2 = []
    graph3 = []
    graph4 = []
    ind = 0
    
    for(x=100;x<=20000;x+=100){
        $.ajax({
            type:"POST",
            url:"http://localhost:3000/api/v1/benchmark",
            data: JSON.stringify({
                "calls": x
            })
        }).done(function(res){
            res = JSON.parse(res);
            graph1[ind]={x:ind*100+100, y:res["publishing-time"]/1000};
            graph2[ind]={x:ind*100+100, y:res["proto-marshal-time"]};
            graph3[ind]={x:ind*100+100, y:res["JSON-decoding-time"]};
            graph4[ind++]={x:ind*100+100, y:res["nats-conn-time"]/1000};
        })
    }
    
    console.log(graph1,graph2,graph3,graph4)
    
    function updateChart1(){
        var chart1 = new CanvasJS.Chart("chartContainer1", {
        title:{
            text: "Benchmarks"
        },
        axisY:{
            title: "time",
            lineColor: "#C24642",
            tickColor: "#C24642",
            labelFontColor: "#C24642",
            titleFontColor: "#C24642",
            suffix: "k"
        },
        toolTip: {
            shared: true
        },
        legend: {
            cursor: "pointer",
            itemclick: toggleDataSeries
        },
        data: [{
            type: "line",
            name: "Publishing Time",
            color: "#369EAD",
            showInLegend: true,
            axisYIndex: 1,
            dataPoints: graph1
        },
        {
            type: "line",
            name: "Proto Marshal Time",
            color: "#C24642",
            axisYIndex: 0,
            showInLegend: true,
            dataPoints: graph2
        },
        {
            type: "line",
            name: "JSON Decoding Time",
            color: "#325c37",
            axisYType: "secondary",
            showInLegend: true,
            dataPoints: graph3
        },
        {
            type: "line",
            name: "Nats Conn Time",
            color: "#7F6084",
            axisYType: "secondary",
            showInLegend: true,
            dataPoints: graph4
        }]
    });
    chart1.render();
    }
    
    setInterval(function(){
        updateChart1()
    }, 1000);
	
function toggleDataSeries(e) {
	if (typeof (e.dataSeries.visible) === "undefined" || e.dataSeries.visible) {
		e.dataSeries.visible = false;
	} else {
		e.dataSeries.visible = true;
	}
	e.chart1.render();
}
}
</script>







</body>


</html>
